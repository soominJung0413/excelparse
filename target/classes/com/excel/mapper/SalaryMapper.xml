<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.excel.mapper.SalaryMapper">
  	<resultMap type="com.excel.domain.SalaryType" id="salType">
  		<id property="sNo" column="s_no"/>
  		<result property="sType" column="s_type"/>
  	</resultMap>
  	
  	<resultMap type="com.excel.domain.SalaryType" id="jsonSaltype">
  		<id property="sNo" column="s_no"/>
  		<result property="sType" column="s_type"/>
  		<collection property="occupants" resultMap="com.excel.mapper.OccupantMapper.occupant"/>
  	</resultMap>
  	
  	<select id="getNow" resultType="java.lang.String">
  		select sysdate from dual
  	</select>
  	
  	<select id="selectList" resultMap="salType">
  		select * from SALARY_TYPE where s_no > 0
  	</select>
  	
  	<select id="selectExcelList" resultMap="jsonSaltype">
  		select st.s_no, st.s_type,o.o_type,ms.jan,ms.feb,ms.mar,ms.apr,ms.may,ms.jun,ms.jul, ms.aug, ms.sep,ms.oct,ms.nov,ms.dec from salary_type st
        left outer join salary_type_chain_occupant sco
        on st.s_no = sco.s_no
        left outer join occupant o
        on sco.o_no = o.o_no
        left outer join monthly_salary ms
        on sco.ms_no = ms.ms_no
        order by s_no
  	</select>
  	
  </mapper>